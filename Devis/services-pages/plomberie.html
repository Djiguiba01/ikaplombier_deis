<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plomberie</title>
  <!-- ::CSS::::::: -->
  <link rel="stylesheet" href="servicepages.css">

  <!-- ::::::cdn icon:::::::: -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- ::::PDF::::::::: -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
    
</head>
<body>
  

  <!-- ::::::::FORMULAIRE::::::::::: -->
  <div class="wrapper">

    <div class="inner">

      <div class="image-holder">
        <img src="image-services/logo.png" alt="img">
      </div>

      <form action="">

        <h3>Devis Plomberie</h3>

        <div class="form-group">
          <!-- <input type="text" placeholder="Nom" class="form-control"> -->
          <input type="text" placeholder="N°:" class="form-control" id="idt">
        </div>

        <div class="form-wrapper">
          <input type="text" placeholder="Désignation" class="form-control" id="Designation">
        </div>

        <div class="form-wrapper">
          <input type="text" min="1" placeholder="Quantité" class="form-control" id="quantite">
        </div>

        <!-- <div class="form-wrapper">
          <select name=""  id="" class="form-control">
            <option value="" disabled selected>Genre</option>
            <option value="homme"  >Homme</option>
            <option value="femme"  >Femme</option>
          </select>
        </div> -->

        <div class="form-wrapper">
          <input type="text" placeholder="Prix Unitaire" class="form-control" id="prixUnitaire">
        </div>

        <div class="form-wrapper">
          <input type="text" placeholder="Montant" class="form-control" id="montant">
        </div>


        <a href="#Devis/plomberiefact.html" class="btn" style="text-decoration: none;" value="Add" onclick="AddRow()">
           AJOUTER 
          <span class="fas fa-chevron-right"></span>
      </a>
        
      </form>

    </div>
  </div>

  <!-- :::::::::::::AFFICHAGE DU FORMULAIRE::::::::::::: -->
 <div class="telepdf">
  <img src="image-services/logo.png" alt="">
  <table id="show">		
    <tr>
        <th>N°:</th>
        <th>DESIGNATION</th>
        <th>QUANTITE</th>
        <th>PRIX UNITAIRE</th>
        <th>MONTANT</th>
    </tr>

</table>
 </div>

  <button onclick="downloadPDF()">Télécharger</button>


<!-- :::::::::::::JAVASCRIPT::::::::::::::::::: -->
  <script>
		
    // Déclaration des variables
		var list1 = [] ;
		var list2 = [] ;
		var list3 = [] ;
		var list4 = [] ;
		var list5 = [] ;

		var n = 1 ;
		var x = 0 ;

		function AddRow(){
			var AddRown = document.getElementById(`show`) ;
			var NewRow = AddRown.insertRow(n);

      // Récupération des données input les ("id")
			list1[x] = document.getElementById("idt").value ;
			list2[x] = document.getElementById("Designation").value ;
			list3[x] = document.getElementById("quantite").value ;
			list4[x] = document.getElementById("prixUnitaire").value ;
			list5[x] = document.getElementById("montant").value ;

      // Insertion de nouveau ligne à chaque clique sur boutton
			var cel1 = NewRow.insertCell(0) ;
			var cel2 = NewRow.insertCell(1) ;
			var cel3 = NewRow.insertCell(2) ;
			var cel4 = NewRow.insertCell(3) ;
			var cel5 = NewRow.insertCell(4) ;

			cel1.innerHTML = list1[x] ;
			cel2.innerHTML = list2[x] ;
			cel3.innerHTML = list3[x] ;
			cel4.innerHTML = list4[x] ;
			cel5.innerHTML = list5[x] ;

			n++ ;
			x++ ;
		}

    //  :::::::::TELECHARGEMENT PDF :::::::::::::::
    function downloadPDF() {

      const element = document.querySelector('.telepdf');
      // Créer une instance de jsPDF
      const pdf = new jsPDF();
      // Obtenir les dimensions de l'élément
      const width = element.offsetWidth;
      const height = element.offsetHeight;
      // Convertir l'élément en une image au format base64
      html2canvas(element).then(function(canvas) {
      const imgData = canvas.toDataURL('image/png');
      // Ajouter l'image convertie au PDF
      pdf.addImage(imgData, 'PNG', 0, 0, width, height);
      // Télécharger le PDF
      pdf.save('contenu_telepdf.pdf');
      });
      }
      // Ajouter un écouteur d'événement au bouton de téléchargement
      const downloadButton = document.querySelector('button');
      downloadButton.addEventListener('click', downloadPDF);

	</script>

 
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau</title>

      <!-- ::CSS::::::: -->
    <link rel="stylesheet" href="servicepages.css">

    <!-- ::::::cdn icon:::::::: -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- ::::PDF::::::::: -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>


    <style>
        table {
          margin-bottom: 20px;
          width: 96%;
          margin-left: 2%;
          margin-right: 2%;
        }
        th, td {
          padding: 10px 10px;
          border: 1px solid black;
        }
        /* table, td, th {
        Border : 1px solid black ;
        }

        table {
        Border-collapse : collapse ;
        Width : 95% ;
        margin-left: 2.5%;
        margin-right: 2.5%;
        }

        th {
        Height : 50px ;
        } */

      </style>
</head>
<body>


    
    <body>

        <!-- ::::::::FORMULAIRE::::::::::: -->
  <div class="wrapper">

    <div class="inner">

      <div class="image-holder">
        <img src="image-services/logo1.png" alt="img">
         <!-- ::::::::::: -->
         <div class="form-group">
          <p style="margin-left: 2%; font-weight: bold; font-size: 17px;">Modication :</p>
          <input type="number" min="1" placeholder="Numéro à modifier" class="form-control" id="idmodif" style="margin-left: 15%;" >
        </div>

        
      <div class="rienpop" style="display: none;">
        Le numéro saisi n'existe pas dans le tableau.
      </div>
        
      </div>

      <form action="">

        <h3>Devis Plomberie</h3>

        <div class="form-group">
          <input type="text" placeholder="Nom destinateur" class="form-control" id="destinateur">
          <input type="text" placeholder="Object" class="form-control" id="objet">
        </div>

        <div class="form-group">
          <input type="text" placeholder="N°: facture" class="form-control" id="numfacture">
          <input type="number" min="1" placeholder="Main Œuvres" class="form-control" id="oeuvres">
          <input type="text" placeholder="N°:" class="form-control" id="idt" style="display: none;">
        </div>


        <div class="form-wrapper">
          <input type="text" maxlength="60" placeholder="Désignation" class="form-control" id="designation" >
        </div>

        <div class="form-wrapper">
          <input type="number" min="1" placeholder="Quantité" class="form-control" id="quantite" onchange="calculateMontant()">
        </div>


        <div class="form-wrapper">
          <input type="number" min="1" placeholder="Prix Unitaire" class="form-control" id="prixUnitaire" onchange="calculateMontant()">
        </div>

        <div class="form-wrapper" style="display: none;">
          <input type="number" placeholder="Montant" class="form-control" id="montant">
        </div>


        <!-- Button Ajouter:::::::::::::: -->
      <!-- <a href="#Devis/plomberiefact.html" class="btn" style="text-decoration: none;" onclick="addRow()">
        AJOUTER 
        <span class="fas fa-chevron-right"></span>
      </a> -->
     
       <!-- Button Ajouter:::::::::::::: -->
       <!-- <a href="#Devis/plomberiefact.html" class="btn" style="text-decoration: none;" value="Add" type="button" onclick="addRow()">
        AJOUTER 
        <span class="fas fa-chevron-right"></span>
      </a> -->
      <a href="#Devis" class="btn" style="text-decoration: none;" value="Add" type="button" onclick="addRow()">
        AJOUTER 
        <span class="fas fa-chevron-right"></span>
      </a>
      </form>
      

    </div>

    
  </div>

 <!-- :::::::::POPUP::::::::::: -->
 <div id="popup" style="display: none;">
  <div class="popbutton">
    <button id="deleteBtn">Supprimer</button>
    <button id="editBtn" onclick="modifierLigne()">Modifier</button>
  </div>
</div>
            <!-- :::::::::::::::TABLEAUX::::::::::::::: -->

      <div class="telepdf" id="capture" style="padding-bottom: 3%;">

        
         <table id="t1" >

            <div class="traitcontainer">

  <div class="entetepdf">

    <div class="gauche">
      <img src="image-services/logo.png" alt="img">
    </div>

    <div class="milieu">
      <h3>IKA PLOMBIER SARL</h3>
      <h4>RCC : MA BKO.2016.B9400, NIF / 086139811A</h4>
      <p> Halles de Bamako, Bloc Adrar des Ifogas, Magasin 481-482</p>
      <p> <em style="font-weight: bold;">Email:</em> bbarou19860@gmail.com <em style="font-weight: bold;">Tel:</em> 74 24 00 74</p>
    </div>

    <div class="droite">
      <img src="image-services/logo.png" alt="img">
    </div>

  </div>
  <hr style="border: 1px solid #3f0dca; margin-top: 1.5%; margin-bottom: 3%; margin-left: 2%; margin-right: 2%;">

  <!-- ::::::::::FACTURE::::::::::: -->
  <div class="numdoitobjet" style="margin-left: 10%; margin-right: 10%;">
    <h2 class="numfact">FACTURE PRO-FORMAT N° <span></span></h2>
    <div class="doit">DOIT : <span></span></div>
    <div class="objet">OBJET : <span></span></div>
  </div>


 </div>

         <!-- :::::::::::::::TABLEAU 1::::::::::::::: -->
            <thead>
              <tr>
                <th>N° </th>
                <th>Désignation</th>
                <th>Quantité</th>
                <th>Prix Unitaire</th>
                <th>Montant</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>


        <!-- :::::::::::::::TABLEAU 2::::::::::::::: -->
          <table id="t2" style="display: none; margin-top: 1%;">

            <thead>
              <tr>
                <th>N° </th>
                <th>Désignation</th>
                <th>Quantité</th>
                <th>Prix Unitaire</th>
                <th>Montant</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>

          <!-- :::::::::POPUP::::::::::: -->
          <!-- <div id="popup" style="display: none;">
            <div class="popbutton">
              <button id="deleteBtn">Supprimer</button>
              <button id="editBtn" onclick="remplirChamps()">Modifier</button>
             <button id="cancelBtn">Annuler</button>
            </div>
        </div> -->

          <!-- :::::::::Pied de page:::::::::::::: -->

          <div class="montantHT" >
            <h2 >Montant HT : <span></span></h2>
          </div>

          <div class="MainOeuvre" >
            <h2 >Main D'œuvres : <span> </span> fcfa</h2>
          </div>

          <div class="tva" >
            <h2 >TVA 18% : <span></span></h2>
          </div>
          
          <div class="montantTTC" >
            <h2 >Montant TTC : <span></span></h2>
          </div>

          
          <div class="gerantdestinat">
            <div class="gauchedest">Pour accord</div>
            <div class="droitegerant">Le Gérant <p></p></div>
          </div>

      </div>


      <!-- :::::::::::BUTTON TELECHARGEMENT:::::::::::::: -->
      <button type="button" id="telecharger" onclick="downloadPDF()">Télécharger PDF</button>
       <!-- <a href="#Devis" class="btn" id="telecharger" style="text-decoration: none;" onclick="downloadPDF()">
        Télécharger
        <span class="fas fa-chevron-right"></span>
      </a> -->

<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<script>

// ::::::::::::APPORTER LA MODIFICATION PAR LIGNE::::::::::::
function modifierLigne() {
  var idModif = document.getElementById("idmodif").value;
  var designation = document.getElementById("designation").value;
  var quantite = document.getElementById("quantite").value;
  var prixUnitaire = document.getElementById("prixUnitaire").value;

  // Vérifier si les champs sont vides
  if (designation === "" || quantite === "" || prixUnitaire === "") {
    alert("Veuillez remplir tous les champs avant de modifier une ligne.");
    return;
  }

  var table = document.getElementById("t1"); // Obtient la référence de la table
  var rows = table.getElementsByTagName("tr"); // Obtient toutes les lignes du tableau

  // Parcours chaque ligne du tableau à l'exception de l'en-tête
  for (var i = 1; i < rows.length; i++) {
    var row = rows[i];
    var idtCell = row.getElementsByTagName("td")[0]; // Récupère la cellule contenant l'ID
    var designationCell = row.getElementsByTagName("td")[1]; // Récupère la cellule contenant la désignation
    var quantiteCell = row.getElementsByTagName("td")[2]; // Récupère la cellule contenant la quantité
    var prixUnitaireCell = row.getElementsByTagName("td")[3]; // Récupère la cellule contenant le prix unitaire
    var montantCell = row.getElementsByTagName("td")[4]; // Récupère la cellule contenant le montant

    if (idModif === idtCell.innerHTML) {
      // Met à jour les valeurs des cellules avec les nouvelles valeurs
      designationCell.innerHTML = designation;
      quantiteCell.innerHTML = quantite;
      prixUnitaireCell.innerHTML = prixUnitaire;

      // Recalculer le montant
      var montant = parseFloat(quantite) * parseFloat(prixUnitaire);
      montantCell.innerHTML = montant;
      montantCell.setAttribute("id", "montant");

      break; // Sort de la boucle une fois la ligne modifiée
    }
  }

  // Réinitialise les champs
  document.getElementById("designation").value = "";
  document.getElementById("idmodif").value = "";
  document.getElementById("quantite").value = "";
  document.getElementById("prixUnitaire").value = "";

  // Appelle la fonction Montant HT
  calculateTotal();

  // Appelle la fonction Montant TVA
  calculerTVA();

  calculerSomme();
}


// :::::::::
// Fonction pour rendre la classe "btn" visible par défaut et la faire disparaître lorsque l'événement se produit dans l'élément avec l'id "idmodif"
function toggleBtnVisibility() {
  var btn = document.getElementsByClassName("btn")[0]; // Obtient la référence de l'élément avec la classe "btn"

  // Rend la classe "btn" visible par défaut
  btn.style.display = "block";

  // Ajoute un écouteur d'événement pour détecter les changements dans l'élément avec l'id "idmodif"
  document.getElementById("idmodif").addEventListener("input", function() {
    // Vérifie si l'élément avec l'id "idmodif" est vide
    if (this.value.trim() === "") {
      // Fait apparaître la classe "btn" lorsque l'élément avec l'id "idmodif" est vide
      btn.style.display = "block";
    } else {
      // Fait disparaître la classe "btn" lorsque l'événement se produit dans l'élément avec l'id "idmodif"
      btn.style.display = "none";
    }
  });
}

// Appelle la fonction pour activer le comportement souhaité
toggleBtnVisibility();






</script>

<!-- :::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->

<script src="servicepages.js"></script>   
    
</body>
</html>
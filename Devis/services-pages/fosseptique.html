<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fosse Septique</title>

    <!-- ::CSS::::::: -->
  <link rel="stylesheet" href="servicepages.css">
  <link rel="stylesheet" href="fossetancheite.css">

  <!-- ::::::cdn icon:::::::: -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   <!-- ::::PDF::::::::: -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>


</head>
<body>

      <!-- ::::::::FORMULAIRE::::::::::: -->
  <div class="wrapper">

    <div class="inner">

      <div class="image-holder">
        <img src="image-services/logo1.png" alt="img">
      </div>

      <form action="" >

        <h3>Devis Fosse Septique</h3>

        <div class="form-group">
          <input type="text" placeholder="Votre nom" class="form-control" id="nom">
          <input type="text" placeholder="Votre prenom" class="form-control" id="prenom">
        </div>


        <div class="form-wrapper">
          <input type="text"  placeholder="Ville/Quartier" class="form-control" id="ville">
        </div>

        <div class="form-wrapper">
          <input type="number"  placeholder="Votre numéro" class="form-control" id="numero" >
        </div>

        <div class="form-group">
            <select name="" id="selectfosse" style="width: 47%;">
                <option value="" disabled selected>Type Fosse Septique</option>
                <option value="Biofil">Biofil</option>

              </select>

            <select name="" id="selectzone" style="width: 47%; margin-left: 6%;">
              <option value="" disabled selected>Zones</option>
              <option value="Standart">Standart</option>
              <option value="Gravier">Gravier</option>
              <option value="Rocheuse">Rocheuse</option>
            </select>
        </div>


    

        <!-- Button Ajouter:::::::::::::: -->
      <a href="#Devis" id="septcent" class="btn" style="text-decoration: none;">
        AJOUTER 
        <span class="fas fa-chevron-right"></span>
      </a>
     
        
      </form>

    </div>
  </div>


    <!-- :::::::::::::AFFICHAGE DU FORMULAIRE::::::::::::: -->
    <div class="telechargerpdf">
        <section id="sectioncorps" style="display: none; margin-bottom: 4%;">
      
          <div class="header">
              <h3>Fosse Septique</h3>
              <img src="image-services/logo.png" alt="sss">
          </div>
      
          <hr style="border: 1px solid #3f0dca; margin-top: 3%; margin-bottom: 3%;">
      
          <div class="header2">
      
              <div class="container1">
                  <h4>Ika Plombier</h4>
                  <p>Mali</p>
                  <p>Halles de Bamako </p>
              </div>
      
              <div class="container2">
                  <h4>Envoyé à</h4>
                  <p class="affichenom">?</p>
                  <p class="afficheprenom"></p>
              </div>
      
              <div class="container3">
                  <h4 >Ville/Quartier</h4>
                  <p class="afficheville">?</p>
              </div>
      
              <div class="container3">
                <h4>Numéro</h4>
                <p class="affichenum">?</p>
            </div>
      
          </div>
      
          <!-- :::Tableau::::::::::::: -->
          <table class="table">
              <thead>
                  <tr>
                   <th>Type de fosse</th>
                   <th>Zone</th>
                   <th>Montant</th>
                  </tr>
              </thead>
              <tbody>
                    <tr>
                         <td data-label="Type de fosse">?</td>
                         <td data-label="Zone">?</td>
                         <td data-label="Montant">?</td>
                    </tr>
          
              </tbody>
            </table>
    
      
            <hr style="border: 1px solid #3f0dca; margin-top: 10%; margin-bottom: 2%;">
      
            <div class="condition">
              <h5>Conditions et paiement</h5>
              <div class="modalite">
                  <div class="tranche">Le payement est dû en 2 tranches</div>
                  <div class="num">
                      <p>Numéro : (+223) 74 24 00 74</p>
                      
                  </div>
              </div>
            </div>
      
      </section>
      </div>
      
      <!-- :::::::::::BUTTON TELECHARGEMENT:::::::::::::: -->
      <button type="button" id="telecharger" style="display: none;" >Télécharger PDF</button>


      <!-- :::::::::::::::SCRIPT:::::::::::::: -->
      <script>
          // ::::::FONCTION QUI AFFICHE TOUT LE CONTENU S'IL Y'A UN EVENNEMENT DANS 1 DES INPUTS::::::::
  function afficherContenu() {
  var sectioncorps = document.getElementById('sectioncorps');
  var telecharger = document.getElementById('telecharger');

  // Événement pour les éléments d'entrée
  var inputs = document.querySelectorAll('input');
  for (var i = 0; i < inputs.length; i++) {
    inputs[i].addEventListener('input', function() {
      sectioncorps.style.display = 'block';
      telecharger.style.display = 'block';
    });
  }
}
afficherContenu();

// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT NOM SAISI:::::::::::::
function afficherNom() {
  var nomInput = document.getElementById('nom');
  var afficheNom = document.querySelector('.affichenom');

  nomInput.addEventListener('input', function() {
    var nom = nomInput.value;
    afficheNom.textContent = nom;
  });
}
afficherNom();


// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT PRENOM SAISI:::::::::::::
function afficherPrenom() {
  var prenomInput = document.getElementById('prenom');
  var affichePrenom = document.querySelector('.afficheprenom');

  prenomInput.addEventListener('input', function() {
    var prenom = prenomInput.value;
    affichePrenom.textContent = prenom;
  });
}
afficherPrenom();

// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT VILLE SAISI:::::::::::::
function afficherVille() {
  var villeInput = document.getElementById('ville');
  var afficheVille = document.querySelector('.afficheville');

  // Événement pour l'élément de saisie
  villeInput.addEventListener('input', function() {
    afficheVille.innerHTML = '<p>' + villeInput.value + '</p>';
  });
}
afficherVille();

// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT NUMERO SAISI:::::::::::::
function afficherNumero() {
  var numeroInput = document.getElementById('numero');
  var afficheNumero = document.querySelector('.affichenum');

  // Événement pour récupérer la saisie
  numeroInput.addEventListener('input', function() {
    var numero = numeroInput.value;
    afficheNumero.textContent = numero;
  });
}
afficherNumero();

// Fonction pour récupérer la valeur de "selectfosse" et l'afficher dans le tableau
function afficherTypeFosse() {
  var selectFosse = document.getElementById('selectfosse');
  var typeFosse = document.querySelector('td[data-label="Type de fosse"]');

  // Événement pour récupérer la valeur sélectionnée
  selectFosse.addEventListener('change', function() {
    typeFosse.textContent = selectFosse.value;
  });
}
afficherTypeFosse();

// Fonction pour récupérer la valeur de "afficherZone" et l'afficher dans le tableau
function afficherZone() {
  var selectZone = document.getElementById('selectzone');
  var zone = document.querySelector('td[data-label="Zone"]');

  // Événement pour récupérer la valeur sélectionnée
  selectZone.addEventListener('change', function() {
    zone.textContent = selectZone.value;
  });
}

afficherZone();



// Fonction pour afficher les montants en fonction de la sélection de "selectzone"
function afficherMontant() {
  var selectFosse = document.getElementById('selectfosse');
  var selectZone = document.getElementById('selectzone');
  var montant = document.querySelector('td[data-label="Montant"]');
  var boutonAjouter = document.getElementById('septcent');

  // Événement pour récupérer la valeur sélectionnée lors du clic sur le bouton "AJOUTER"
  boutonAjouter.addEventListener('click', function() {
    var valeurFosse = selectFosse.value;
    var valeurZone = selectZone.value;

    if (valeurFosse === "" || valeurZone === "") {
      montant.textContent = "?";
      if (valeurFosse === "") {
        alert("Veuillez sélectionner le type de fosse.");
      }
      if (valeurZone === "") {
        alert("Veuillez sélectionner la zone.");
      }
    } else {
      switch (valeurZone) {
        case "Standart":
          montant.textContent = "500 000" + ' fcfa';
          break;
        case "Gravier":
          montant.textContent = "600 000" + ' fcfa';
          break;
        case "Rocheuse":
          montant.textContent = "750 000" + ' fcfa';
          break;
        default:
          montant.textContent = "?";
          break;
      }

      // Vider les champs après l'affichage du montant
      // selectFosse.value = "";
      selectZone.value = "";
    }
  });
}
afficherMontant();



// :::::::::::PDF TELECHARGEMENT::::::::::::::::::
// Transformation en image
window.html2canvas = html2canvas;
window.jsPDF = window.jspdf.jsPDF;

function makePDF() {
  html2canvas(document.querySelector("#capture"), {
    allowTaint: true,
    useCORS: true,
    scale: 1
  }).then(canvas => {
    var img = canvas.toDataURL("image/png");

    var doc = new jsPDF();
    doc.setFont('Arial');
    doc.save("fosseptique.pdf");
  });
}

function downloadPDF() {
  var element = document.querySelector(".telechargerpdf");
  html2canvas(element, {
    scale: 2,
    scrollX: 0,
    scrollY: 0,
    windowWidth: document.documentElement.offsetWidth,
    windowHeight: document.documentElement.offsetHeight,
    useCORS: true
  }).then(function (canvas) {
    var imgData = canvas.toDataURL("image/png", 1.0);
    var pdf = new jsPDF("p", "mm", "a4", true);
    var width = pdf.internal.pageSize.getWidth();
    var height = pdf.internal.pageSize.getHeight();

    pdf.addImage(imgData, "PNG", 0, 0, width, height);
    pdf.save("fosseptique.pdf");
  });
}
document.getElementById("telecharger").addEventListener("click", function () {
  downloadPDF();
});


      </script>    
</body>
</html>
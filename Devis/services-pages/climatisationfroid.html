<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Climatisation et Froid</title>

  <!-- ::CSS::::::: -->
  <link rel="stylesheet" href="servicepages.css">
  <link rel="stylesheet" href="fossetancheite.css">

  <!-- ::::::cdn icon:::::::: -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   <!-- ::::PDF::::::::: -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>

   <style>
    @media(max-width: 1800px){
    .table thead{
		display: none;
	}

	.table, .table tbody, .table tr, .table td{
		display: block;
		width: 100%;
	}
	.table tr{
		margin-bottom:15px;
	}
	.table td{
		text-align: right;
		padding-left: 50%;
		text-align: right;
		position: relative;
	}
	.table td::before{
		content: attr(data-label);
		position: absolute;
		left:0;
		width: 50%;
		padding-left:15px;
		font-size:15px;
		font-weight: bold;
		text-align: left;
	}
}

   </style>
</head>
<body>
  

  <!-- ::::::::FORMULAIRE::::::::::: -->
  <div class="wrapper">

    <div class="inner">

      <div class="image-holder">
        <img src="image-services/logo1.png" alt="img">
      </div>

      <form action="" >

        <h3>Climatisation et Froid </h3>

        <div class="form-group">
          <input type="text" placeholder="Votre nom" class="form-control" id="nom">
          <input type="text" placeholder="Votre prenom" class="form-control" id="prenom">
        </div>


        <div class="form-wrapper">
          <input type="number" min="1" maxlength="8" placeholder="Numéro" class="form-control" id="numero">
        </div>

        <div class="form-wrapper">
          <input type="text" min="1" placeholder="Ville/Quartier" class="form-control" id="ville" >
        </div>

        <div class="form-group">
          <select name="" id="selectservice" style="width: 47%;">
              <option value="" disabled selected>Service</option>
              <option value="Climatisation">Climatisation</option>
              <option value="Froid">Refrigerateur</option>
            </select>

            <!-- :::::::AFFICHE Climatisation::::::::::::: -->
          <select name="" id="selectprobleme" style="width: 47%; margin-left: 6%; display: none;">
            <option value="" disabled selected>Problème</option>
            <option value="Entretien">Entretien</option>
            <option value="Installation">Installation</option>
            <option value="Reparation">Réparation</option>
          </select>
      </div>

          <!-- :::::::AFFICHE Climatisation::::::::::::: -->
        <div class="form-group" >
          <input type="number" min="1" placeholder="Nombre appareil" class="form-control" id="nombre" style="display: none;">

          <!-- <select name="" id="selectequipe" style="width: 47%; display: none;">
            <option value="" disabled selected>Equipements</option>
            <option value="Equipe">Equipé</option>
            <option value="Nom Equipe">Non équipé</option>
          </select> -->
          
        </div>

        

        <!-- :::::::AFFICHE Froid::::::::::::: -->
         <div class="form-group" >
        <select name="" id="selectadduct" style="width: 47%; display: none;">
            <option value="" disabled selected>Problème</option>
            <option value="Equipesq">Réparation</option>
          </select>

         <!-- <select name="" id="selectprobleme" style="width: 47%; margin-left: 6%;">
          <option value="" disabled selected>???</option>
          <option value="Standart">???</option>
        </select>  -->
    </div>

        <!-- Button Ajouter:::::::::::::: -->
      <a href="#Devis" id="septcent" class="btn" style="text-decoration: none;">
        AJOUTER 
        <span class="fas fa-chevron-right"></span>
      </a>
     
        
      </form>

    </div>
  </div>



  <!-- :::::::::::::AFFICHAGE DU FORMULAIRE::::::::::::: -->
  <div class="telechargerpdf">
  <section id="sectioncorps" style="display: none; margin-bottom: 4%;">

    <div class="header">
        <h3>Devis ?</h3>
        <!-- <img src="image-services/logo.png" alt="sss"> -->
    </div>

    <hr style="border: 1px solid #3f0dca; margin-top: 3%; margin-bottom: 3%;">

    <div class="header2">

        <div class="container1">
            <h4>Ika Plombier</h4>
            <p>Mali</p>
            <p>Halles de Bamako </p>
        </div>

        <div class="container2">
            <h4>Envoyé à</h4>
            <p class="affichenom">?</p>
            <p class="afficheprenom"></p>
        </div>

        <div class="container3">
            <h4 >Ville/Quartier</h4>
            <p class="afficheville">?</p>
        </div>

        <div class="container3">
          <h4>Numéro</h4>
          <p class="affichenum">?</p>
      </div>

    </div>

    <!-- :::Tableau::::::::::::: -->
    <table class="table">

              <!-- :::::::::FORAGE ENTETE::::::::: -->
        <!-- <thead >
            <tr >
             <th>Zone</th>
             <th>Mètre</th>
             <th>Equipement</th>
             <th>Montant</th>
            </tr>
        </thead> -->

         <!-- ::::::::SERVICE FROID::::::: -->
         <tbody id="tableaufroid" style="display: none;">
            <tr>
                <td data-label="Service"  >Froid</td>
                <td data-label="Problème"  >?</td>
                <td data-label="Montant"  >?</td>
            </tr>

    </tbody>

        <!-- :::::::::CLIMATISATION ENTRETIEN::::::::: -->
        <tbody id="tableauentretien" style="display: none;">
              <tr>
                   <td data-label="Service"  >Climatisation</td>
                   <td data-label="Problème"  >?</td>
                   <td data-label="Nombre"  >?</td>
                   <td data-label="Montant"  >?</td>
              </tr>
        </tbody>

         <!-- :::::::::CLIMATISATION INSTALLATION::::::::: -->
         <tbody id="tableauinstall" style="display: none;">
            <tr>
                 <td data-label="Service"  >Climatisation</td>
                 <td data-label="Problème"  >?</td>
                 <td data-label="Nombre"  >?</td>
                 <td data-label="Montant"  >?</td>
            </tr>
      </tbody>

        <!-- ::::::::CLIMATISATION REPARATION:::::::::: -->
        <tbody id="tableaureparation" style="display: none;">
          <tr>
            <td data-label="Service"  >Climatisation</td>
            <td data-label="Problème"  >?</td>
            <td data-label="Montant"  >?</td>
          </tr>

      </table>


      <hr style="border: 1px solid #3f0dca; margin-top: 10%; margin-bottom: 2%;">

      <div class="condition">
        <h5>Conditions et paiement</h5>
        <div class="modalite">
            <div class="tranche">Le payement est dû en 2 tranches</div>
            <div class="num">
                <p>Numéro : (+223) 74 24 00 74</p>
                
            </div>
        </div>
      </div>

</section>
</div>

<!-- :::::::::::BUTTON TELECHARGEMENT:::::::::::::: -->
<button type="button" id="telecharger" style="display: none;" >Télécharger PDF</button>














<!-- ::::::::::::::::::::SCRIPT:::::::::::::::::: -->
<script>

  // ::::::FONCTION QUI AFFICHE TOUT LE CONTENU S'IL Y'A UN EVENNEMENT DANS 1 DES INPUTS::::::::
  function afficherContenu() {
  var sectioncorps = document.getElementById('sectioncorps');
  var telecharger = document.getElementById('telecharger');

  // Événement pour les éléments d'entrée
  var inputs = document.querySelectorAll('input');
  for (var i = 0; i < inputs.length; i++) {
    inputs[i].addEventListener('input', function() {
    // // Appel de la fonction pour mettre à jour le montant dans le tableau
    // multiplierNombre();
      sectioncorps.style.display = 'block';
      telecharger.style.display = 'block';
    });
  }
}
afficherContenu();


// ::::::::::::::AFFICHER NOM DEVIS SELECTIONNER:::::::::::::
function afficherDevis() {
  var selectService = document.getElementById('selectservice');
  var header = document.querySelector('.header');
  var devisText = document.createElement('h3');

  // Ajoute une image à l'élément header
  var image = document.createElement('img');
  image.src = 'image-services/logo.png';
  header.appendChild(image);

  selectService.addEventListener('change', function() {
    var selectedOption = selectService.value;

    if (selectedOption === 'Climatisation') {
      devisText.textContent = 'Devis Climatisation';
    } else if (selectedOption === 'Froid') {
      devisText.textContent = 'Devis Froid';
    } else {
      devisText.textContent = 'Devis ?';
    }

    // Supprime les anciens éléments s'ils existent dans le header
    while (header.firstChild) {
      header.removeChild(header.firstChild);
    }

    // Ajoute le nouveau texte dans le header
    header.appendChild(devisText);
   // Ajoute l'image à l'élément header
        header.appendChild(image);
  });
}
// Appel de la fonction pour activer le comportement
afficherDevis();



// :::::::DANS LA FORM AFFICHER LES CONTENUS EN FONCTIONDE LA SELECT OPTION {[FORRAGE/ADDUCTION]} ::::::::::::
function afficherContenuSelect() {
  var selectservice = document.getElementById('selectservice');
  var selectprobleme = document.getElementById('selectprobleme');
  var inputNombre = document.getElementById('nombre');
//   var selectEquipe = document.getElementById('selectequipe');
  var selectAdduct = document.getElementById('selectadduct');

  selectservice.addEventListener('change', function() {
    if (selectservice.value === 'Climatisation') {
        selectprobleme.style.display = 'block';
      inputNombre.style.display = 'block';
    //   selectEquipe.style.display = 'block';
      selectAdduct.style.display = 'none';
    } else if (selectservice.value === 'Froid') {
        selectprobleme.style.display = 'none';
      inputNombre.style.display = 'none';
    //   selectEquipe.style.display = 'none';
      selectAdduct.style.display = 'block';
    } else {
        selectprobleme.style.display = 'none';
      inputNombre.style.display = 'none';
    //   selectEquipe.style.display = 'none';
      selectAdduct.style.display = 'none';
    }
  });
}
afficherContenuSelect();



// :::::::DANS LE TABLEAU AFFICHER LES CONTENUS EN FONCTIONDE LA SELECT OPTION {[FORRAGE/ADDUCTION]} ::::::::::::
function afficherContenuSelectTable() {
    // CLIMATISATION "ENTRETIEN ET INSTALLATION"
  var selectprobleme = document.getElementById('selectprobleme');
  var selectservice = document.getElementById('selectservice');
  var tableauentretien = document.getElementById('tableauentretien');
  var tableauinstall = document.getElementById('tableauinstall');
  var tableaureparation = document.getElementById('tableaureparation');

  selectprobleme.addEventListener('change', function() {
    if (selectprobleme.value === 'Entretien') {
        tableauentretien.style.display = 'block';
        tableauinstall.style.display = 'none';
        tableaureparation.style.display = 'none';
    } else if (selectprobleme.value === 'Installation') {
        tableauinstall.style.display = 'block';
        tableauentretien.style.display = 'none';
        tableaureparation.style.display = 'none';
    } else if (selectprobleme.value === 'Reparation') {
        tableauentretien.style.display = 'none';
        tableauinstall.style.display = 'none';
        tableaureparation.style.display = 'block';
    }else {
        tableauentretien.style.display = 'none';
        tableauinstall.style.display = 'none';
        tableaureparation.style.display = 'none';
    }
  });



//   DANS ID "selectservice" SI ON  SELECTIONNE "FROID" AFFICHE TABLEAU 
  selectservice.addEventListener('change', function() {
    if (selectservice.value === 'Froid') {
        tableauentretien.style.display = 'none';
        tableauinstall.style.display = 'none';
        tableaureparation.style.display = 'none';
        tableaufroid.style.display = 'block';
    } else {
        tableauentretien.style.display = 'none';
        tableauinstall.style.display = 'none';
        tableaureparation.style.display = 'none';
        tableaufroid.style.display = 'none';

    }
  });
}
afficherContenuSelectTable();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT NOM SAISI:::::::::::::
function afficherNom() {
  var nomInput = document.getElementById('nom');
  var afficheNom = document.querySelector('.affichenom');

  nomInput.addEventListener('input', function() {
    var nom = nomInput.value;
    afficheNom.textContent = nom;
  });
}
afficherNom();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT PRENOM SAISI:::::::::::::
function afficherPrenom() {
  var prenomInput = document.getElementById('prenom');
  var affichePrenom = document.querySelector('.afficheprenom');

  prenomInput.addEventListener('input', function() {
    var prenom = prenomInput.value;
    affichePrenom.textContent = prenom;
  });
}
afficherPrenom();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT VILLE SAISI:::::::::::::
function afficherVille() {
  var villeInput = document.getElementById('ville');
  var afficheVille = document.querySelector('.afficheville');

  // Événement pour l'élément de saisie
  villeInput.addEventListener('input', function() {
    afficheVille.innerHTML = '<p>' + villeInput.value + '</p>';
  });
}
afficherVille();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT NUMERO SAISI:::::::::::::
function afficherNumero() {
  var numeroInput = document.getElementById('numero');
  var afficheNumero = document.querySelector('.affichenum');

  // Événement pour récupérer la saisie
  numeroInput.addEventListener('input', function() {
    var numero = numeroInput.value;
    afficheNumero.textContent = numero;
  });
}
afficherNumero();



// :::::: FONCTION QUI RECUPERE LES PROBLEME CLIMATISATION:::::::::::::

// <!-- :::::::::PROBLEME CLIMATISATION ENTRETIEN::::::::: -->
var selectprobleme = document.getElementById('selectprobleme');
var tdProbleme = document.querySelector('#tableauentretien td[data-label="Problème"]');
// Écouter les changements de sélection
selectprobleme.addEventListener('change', function() {
  // Mettre à jour le contenu du <td> avec la sélection
  tdProbleme.textContent = selectprobleme.value;
});



// <!-- :::::::::PROBLEME CLIMATISATION INSTALLATION::::::::: -->
var selectprobleme = document.getElementById('selectprobleme');
var tdinstall = document.querySelector('#tableauinstall td[data-label="Problème"]');
// Écouter les changements de sélection
selectprobleme.addEventListener('change', function() {
  // Mettre à jour le contenu du <td> avec la sélection
    tdinstall.textContent = selectprobleme.value;
});



// <!-- :::::::::PROBLEME CLIMATISATION REPARATION::::::::: -->
var selectprobleme = document.getElementById('selectprobleme');
var tdreparation = document.querySelector('#tableaureparation td[data-label="Problème"]');
// Écouter les changements de sélection
selectprobleme.addEventListener('change', function() {
  // Mettre à jour le contenu du <td> avec la sélection
    tdreparation.textContent = selectprobleme.value;
});



// :::::::::::: RECUPERER LA VALEUR DE INPUT NOMBRE SAISI::::::::::::::
function afficherValeurNombre() {
  var nombreInput = document.getElementById('nombre');
  var valeursNombre = document.querySelectorAll('td[data-label="Nombre"]');

  nombreInput.addEventListener('input', function() {
    var valeur = nombreInput.value;

    valeursNombre.forEach(function(element) {
      element.textContent = valeur;
    });
  });
}
afficherValeurNombre();



// :::::::::::::: FONCTION QUI MULTIPLIE DE "Entretien*15 000"ET"Installation*25 000"
function calculerMontant() {
  var selectprobleme = document.getElementById('selectprobleme');
  var nombreInput = document.getElementById('nombre');

  var montant = 0;

  if (selectprobleme.value === 'Entretien') {
    montant = nombreInput.value * 15000;
    var montantAvecEspacement = montant.toLocaleString('fr-FR');
    document.getElementById('tableauentretien').querySelector('td[data-label="Montant"]').textContent = montantAvecEspacement + ' fcfa';
  } else if (selectprobleme.value === 'Installation') {
    montant = nombreInput.value * 25000;
    var montantAvecEspacement = montant.toLocaleString('fr-FR');
    document.getElementById('tableauinstall').querySelector('td[data-label="Montant"]').textContent = montantAvecEspacement + ' fcfa';
  }
}
// Appel de la fonction lorsqu'il y a un changement dans les éléments select et input
document.getElementById('selectprobleme').addEventListener('change', calculerMontant);
document.getElementById('nombre').addEventListener('input', calculerMontant);







// :::::::::::PDF TELECHARGEMENT::::::::::::::::::
// Transformation en image
window.html2canvas = html2canvas;
window.jsPDF = window.jspdf.jsPDF;

function makePDF() {
  html2canvas(document.querySelector("#capture"), {
    allowTaint: true,
    useCORS: true,
    scale: 1
  }).then(canvas => {
    var img = canvas.toDataURL("image/png");

    var doc = new jsPDF();
    doc.setFont('Arial');
    doc.save("climatisationfroid.pdf");
  });
}

function downloadPDF() {
  var element = document.querySelector(".telechargerpdf");
  html2canvas(element, {
    scale: 2,
    scrollX: 0,
    scrollY: 0,
    windowWidth: document.documentElement.offsetWidth,
    windowHeight: document.documentElement.offsetHeight,
    useCORS: true
  }).then(function (canvas) {
    var imgData = canvas.toDataURL("image/png", 1.0);
    var pdf = new jsPDF("p", "mm", "a4", true);
    var width = pdf.internal.pageSize.getWidth();
    var height = pdf.internal.pageSize.getHeight();

    pdf.addImage(imgData, "PNG", 0, 0, width, height);
    pdf.save("climatisationfroid.pdf");
  });
}
document.getElementById("telecharger").addEventListener("click", function () {
  downloadPDF();
});

</script>


 
</body>
</html>